# Performance project

이 프로젝트는 서버에서 대용량 트래픽을 효율적으로 처리하는 과정을 보여준다.

이를 위한 예제로 '좌석 예매 시스템'을 개발하면서 점진적으로 성능을 개선해 나간다.

<hr/>

## 좌석도 구조

1. 좌석도는 '블록' > '열' > '좌석'의 형태를 가진다.
1. 아래 좌석도를 예로 들면, 블록A/B가 존재한다.
1. 각각의 블록에는 '가/나/다/라' 열이 존재한다.
1. 각 좌석의 좌석번호는 각 블록에서 고유하며 순서는 불규칙하다.
1. 노락색으로 표시된 '선점된 좌석'은 사용자가 구매를 위해서 선택한 좌석이다.
1. 빨간색으로 표시된 좌석은 선점 후 구매(결제)가 완료된 좌석이다.

<img src="./seatmap_structure.png"  height="300px"></img>

<hr/>

## 첫 번째 버전 목표

서비스 인터페이스와 Block, Row, Seat 등 도메인을 구현한다. <br/>
성능은 고려하지 않고 코드를 최대한 간단하게 작성한다.

## 요구사항

1. 좌석도 조회 인터페이스
1. 좌석 선점/취소 인터페이스
1. 좌석 예매/취소 인터페이스

### 쓰기 성능

1. 5만개의 좌석이 존재하는 공연.
1. 좌석도 시스템 사용자 50만 명.
1. 사용자 한 명은 1분에 10번의 좌석을 선택/해제한다.
1. 위의 조건을 수용하면 1분에 50만\*10회 만큼 서버에 업데이트가 이루어져야 한다.
1. 이것은 1초에 8만 번의 업데이트가 발생하는 것이다.(500만/60sec = 84000/sec)
   <br/>

### 읽기 성능

1. 사용자가 좌석 선점 시 현재 상태가 업데이트 되게 한다면 1분에 500만 번의 읽기가 발생한다.
1. A사용자가 좌석 선점 시 다른 사용자에게 바로 상태 업데이트를 한다면 50만/sec 읽기가 발생한다.

왜 이 정도의 수치가 나오는 지는 중요하지 않다. 중요한 것은 정말 많은 리퀘스트가 발생한다는 것이다.

<br/>
<hr/>
